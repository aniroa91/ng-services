@(rs: churn.models.RegionResponse, month: String, email: String ,postUrl: Call)(implicit request: RequestHeader)

@import services.domain.CommonService.formatNumber
@import services.domain.CommonService.percent
@import services.domain.CommonService.format2Decimal
@import churn.utils.CommonUtil
@import churn.utils.AgeGroupUtil

<!DOCTYPE html>

<html class="no-js" lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Churn Dashboard</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
        <link rel="stylesheet" href="/assets/otherLayout/css/bootstrap.min.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/font-awesome.min.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/owl.carousel.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/owl.theme.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/owl.transitions.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/animate.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/normalize.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/meanmenu.min.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/main.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/educate-custon-icon.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/scrollbar/jquery.mCustomScrollbar.min.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/metisMenu/metisMenu.min.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/metisMenu/metisMenu-vertical.css">
        <link rel="stylesheet" href="/assets/otherLayout/style.css">
        <link rel="stylesheet" href="/assets/otherLayout/css/responsive.css">
        <link rel="stylesheet" href="/assets/custom/css/waitMe.css">
        <link rel="stylesheet" href="/assets/custom/css/hover-min.css">
            <!-- bootstrap-daterangepicker -->
        <link href="/assets/datepicker/css/bootstrap-datepicker.css" rel="stylesheet">
        <script src="/assets/otherLayout/js/vendor/modernizr-2.8.3.min.js"></script>
        <style>
                .aHeader{
                    font-size: 24px;
                    color: #0df3cf!important;
                    font-weight: 600;
                }
                .nav-tabs>li.active>a, .nav-tabs>li.active>a:focus, .nav-tabs>li.active>a:hover {
                    color: #16a085;
                    font-weight: 600;
                    cursor: default;
                    background: #fff;
                    border: 1px solid #fff;
                    border-bottom-color: transparent;
                }
                .nav-tabs>li>a:hover{
                    background: linear-gradient(to right, #2b98ef, #90caf9 99%);
                }
                .nav-tabs>li>a{
                    color: #fff;
                }

                .panel-primary{
                    border-color: #ddd;
                }

                .panel-primary>.panel-heading{
                    background: linear-gradient(to right, #2b98ef, #90caf9 99%);
                }
                .panel-heading {
                    padding: 10px 10px 0px !important;
                    border-bottom: 0px solid transparent !important;
                    border-top-left-radius: 3px;
                    border-top-right-radius: 3px;

                }
                .txtFilter{
                    color: #fff; background: #16a085;padding: 2px
                }
                .txtInputMb{
                    text-align: center;cursor: pointer;height: 20px;background-color: #fff!important
                }

                .txtInput{
                    text-align: center;cursor: pointer;height: 35px;background-color: #fff!important
                }

                .activeLi{
                    background: linear-gradient(45deg, #f3822b 0%, #ffca28 100%);
                    font-weight: 600;
                }
                .txtControl{
                    margin-top: 5px;
                    padding: 6px 12px;
                    font-size: 14px;
                    line-height: 1.42857143;
                    max-width: 200px;
                    color: #fff;
                    background-color: #16a085;
                }
                .custom_tooltip{
                    position: absolute;
                    z-index: 1000;
                    opacity: 1!important;
                    color: #0D3349;
                    border: 1px solid #ddd;
                    background: white;
                    padding: 10px;
                }
                .custom_tooltip p{
                    margin-bottom: 0px!important;
                }
                .circle {
                    background: #fff;
                    border: 1px solid black;
                    margin-bottom: 5px;
                    display: inline-block;
                    border-radius: 50%;
                    min-width: 13px;
                    min-height: 13px;
                    color: white;
                    text-align: center;
                    line-height: 1;
                    box-sizing: content-box;
                    white-space: nowrap;
                }
                .circle:before {
                    content: "";
                    display: inline-block;
                    vertical-align: middle;
                    padding-top: 100%;
                    height: 0;
                }
                .circle span {
                    display: inline-block;
                    vertical-align: middle;
                }
                .noData-title{
                    margin-top: 21px;
                    margin-bottom: 13px;
                    text-align: center;
                    text-transform: uppercase;
                    font-weight: 300;
                    background: #fff;
                    font-size: 30px;
                    color: #f60;
                    padding: 20px;
                }
                .highcharts-tooltip>span {
                    border: 1px solid silver;
                    border-radius: 3px;
                    box-shadow: 1px 1px 2px #888;
                    z-index: 9999!important;
                }
                .highcharts-credits{display: none}
                .highcharts-contextbutton{display: none}

                .overlay {
                    font-size: 12px;
                    color: #0D3349;
                    width: 85px;
                    height: 120px;
                    padding: 2px;
                    position: absolute;
                    border: 1px solid #73879C;
                    top: 60px;   /* chartArea top  */
                }
                .btnRefresh{
                    background: #6c757d;
                    color: #fff!important;
                    margin-right: 5px;
                    float:right
                }
                .lineDivWhite{
                    margin: 0px 0px 10px 0px;
                }
                .lineDivBlack{
                    border: 1px solid #f7f5f5;
                    margin: 10px 0px 10px 0px;
                }
                .date{
                    margin-top: 10px;
                    width: 180px;
                    margin-left: 10px;
                    color: #2A3F54;
                }
                .titFilter{
                    font-size: 18px;
                    color: #16a085;
                    font-weight: 600;
                    margin-left: 10px;
                }
                .selectBox{
                    cursor: pointer;
                    margin-top: 10px;
                    width: 177px;
                    margin-left: 10px;
                    color: #555!important;
                    height: 35px;
                }
                .selectBoxMb{
                    cursor: pointer;
                    margin-top: 10px;
                    width: 177px;
                    margin-left: 10px;
                    color: #555!important;
                    height: 20px;
                }
                .filter{
                    padding: 5px 0px 0px 10px;
                    margin: 30px 0px 15px 0px;
                    color: #f90;
                    font-size: 18px;
                    background: #F7F7F7;
                }
                .areaXs{
                    margin-left: 10px;width:93%;color: #5A738E
                }
                .txtCmt {
                    color: #16a085;
                    max-width: 200px;
                    padding: 0px 10px 0px 10px;
                }
                .lineDivXs {
                    margin: 0px 0px 10px 0px;
                    background: white;
                    width: 95%;
                }
                .titBox{
                    font-family: "Helvetica Neue", Roboto, Arial, "Droid Sans", sans-serif;
                    font-size: 16px;
                    color: #0D3349;
                }
                .opacityLg{
                    opacity: 0.1;
                }
                .opacityLg:hover{
                    opacity: 1;
                }
                .divMore span{
                    color: #fff;
                    font-size: 13px;
                    font-weight: 100;
                    font-family: Arial;
                }
                .divMore{
                    margin-bottom: 0px;
                    padding: 0px 4px 0px 4px;
                }
                .ddMore a{
                    float: right;
                    padding-right: 11px;
                    cursor: pointer;
                    margin-top: 0px;
                }
                .ddMore a i {
                    color: #fff;
                    font-size: 16px;
                }
                .ddMore{
                    /*min-width: 390px!important;*/
                    position: inherit
                }
        </style>
    </head>

    <body>
            <!-- Start Left menu area -->
        <div class="left-sidebar-pro">
            <nav id="sidebar" class="">
                <div class="sidebar-header">
                    <a href="/internet/age" class="aHeader"><img class="main-logo" width="38" height="35" src="/assets/images/home.jpg" alt=""> <span class="hvr-pulse">INTERNET</span></a>
                </div>
                <div class="left-custom-menu-adp-wrap comment-scrollbar">
                    <nav class="sidebar-nav left-sidebar-menu-pro divLeft">
                        <div class="col-xs-12 filter"><i class="fa fa-filter"></i> FILTERING </div>
                        <div class="ageDiv" style="padding-top: 15px;display: none;margin-bottom: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Age</span>
                            <p class="txtControl txtAge"></p>
                        </div>
                        <div class="profileDiv" style="padding-top: 15px;display: none;margin-bottom: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Profile</span>
                            <p class="txtControl txtProfile"></p>
                        </div>
                        <div class="regionDiv" style="padding-top: 15px;display: none;margin-bottom: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Region</span>
                            <p class="txtControl txtRegion"></p>
                        </div>
                        <div class="col-xs-12 lineDivBlack"></div>
                        <div class="divStatus" style="margin-bottom: 20px;padding-top: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Status</span>
                            <select class="form-control selectBox slStatus" style="border: 1px solid #16a085!important">
                            @for( (k,v) <- CommonUtil.STATUS_MAP){
                                @if(v == 1){
                                    <option value="@v" selected>@k</option>
                                }else{
                                    <option value="@v">@k</option>
                                }
                            }
                            </select>
                        </div>
                        @*<div class="col-xs-12 lineDivBlack"></div>
                        <div class="divRegion" style="height: 120px;padding-top: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Region</span>
                            <select class="form-control selectBox slRegion" style="border: 1px solid #16a085!important">
                                <option value="*" selected>--- Choose Region ---</option>
                                @for( (k,v) <- CommonUtil.REGION.toArray.sorted){
                                    <option value="@v">@k</option>
                                }
                            </select>
                        </div>*@
                        <div class="col-xs-12 lineDivBlack"></div>
                        <div style="height: 140px;padding-top: 15px">
                            <span class="titFilter"><i class="fa fa-bell"></i> Group Month</span>
                            <div class="input-group date monthPicker">
                                <input type="text" class="monthGrp form-control txtInput" value="@month" readonly="true" style="background-color: #16a085!important;color: #fff">
                                <span class="input-group-addon" style="background-color: #5A738E!important;"><i class="fa fa-calendar" aria-hidden="true" style="color:white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="col-xs-12 lineDivWhite"></div>
                        <div style="padding:0px 5px">
                            <a class="apply btn btn-xs btn-success" style="float: right;"><i class="fa fa-check-circle"></i> Apply</a>
                            <a href="/internet/region" class="btn btn-xs btn-secondary btnRefresh"><i class="fa fa-refresh"></i> Refresh</a>
                        </div>
                        <div class="col-xs-12 lineDivBlack"></div>
                        @*<div style="margin-top: 60px">
                            <label class="txtCmt">Data is pending 2018-10</label>
                            <textarea class="form-control" placeholder="Your comment report..." id="cmt" rows="3" style="color: #13171b"></textarea>
                            <a class="btn btn-xs btn-primary" style="margin: 10px 0px 20px 0px;float: right">Comment</a>
                        </div>*@
                    </nav>
                </div>
            </nav>
        </div>
            <!-- End Left menu area -->
            <!-- Start Welcome area -->
        <div class="all-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="logo-pro">
                            <a href="/internet/age" class="aHeader"><img class="main-logo" width="38" height="35" src="/assets/images/home.jpg" alt=""> INTERNET</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-advance-area">
                <div class="header-top-area">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="header-top-wraper">
                                    <div class="row">
                                        <div class="col-lg-1 col-md-0 col-sm-1 col-xs-12">
                                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#menuTop" aria-expanded="true" style="color: #4292c6">
                                                <span class="sr-only">Toggle navigation</span>
                                                <i class="fa fa-bars" aria-hidden="true" style="font-size: 26px"></i>
                                            </button>
                                        </div>

                                        <div class="col-lg-11 col-md-11 col-sm-12 col-xs-12 menu-top" id="menuTop">
                                            <div class="header-top-menu tabl-d-n">
                                                <ul class="nav navbar-nav mai-top-nav">
                                                    <li class="nav-item"><a href="/internet/overview" class="nav-link"><i class="fa fa-picture-o"></i> OVERVIEW</a>
                                                    </li>
                                                    <li class="nav-item"><a href="/internet/age" class="nav-link"><i class="fa fa-user"></i> AGE</a>
                                                    </li>
                                                    <li class="nav-item activeLi"><a href="/internet/region" class="nav-link"><i class="fa fa-map-marker"></i> REGION</a>
                                                    </li>
                                                    <li class="nav-item"><a href="/internet/calllog" class="nav-link"><i class="fa fa-bug"></i> CALLLOG</a>
                                                    </li>
                                                    <li class="nav-item"><a href="/internet/checklist" class="nav-link"><i class="fa fa-building"></i> CHECKLIST</a>
                                                    </li>
                                                    <li class="nav-item"><a href="/internet/detect" class="nav-link"><i class="fa fa-exclamation-triangle"></i> DETECT PROBLEM</a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="header-right-info">
                                                <ul class="nav navbar-nav mai-top-nav header-right-menu">
                                                    <li class="nav-item">
                                                        <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">
                                                            <img src="/assets/images/user-default-white.png" alt="">
                                                            <span class="admin-name">@email</span>
                                                            <i class="fa fa-angle-down edu-icon edu-down-arrow"></i>
                                                        </a>
                                                        <ul role="menu" class="dropdown-header-top author-log dropdown-menu animated zoomIn" style="left: -70px">
                                                            <li><a href="/logout"><i class="fa fa-sign-out pull-right mg-tb-5"></i>Log Out</a>
                                                            </li>
                                                        </ul>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <!-- Mobile Menu start -->
                <div class="mobile-menu-area">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="mobile-menu">
                                    <nav id="dropdown">
                                        <ul class="mobile-menu-nav">
                                            <div class="disInline">
                                                <div class="col-sm-4 col-xs-12 ageDiv" style="padding-top: 15px;display: none">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Age</span>
                                                    <span class="txtAge txtFilter"></span>
                                                </div>
                                                <div class="col-sm-4 col-xs-12 profileDiv" style="padding-top: 15px;display: none">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Profile</span>
                                                    <span class="txtProfile txtFilter"></span>
                                                </div>
                                                <div class="col-sm-4 col-xs-12 regionDiv" style="padding-top: 15px;display: none">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Region</span>
                                                    <span class="txtRegion txtFilter"></span>
                                                </div>
                                            </div>
                                            <div class="disInline">
                                                @*<div class="col-sm-4 col-xs-12" style="height: 70px;padding-top: 15px">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Region</span>
                                                    <select class="form-control selectBoxMb slRegion" style="height: 20px">
                                                        <option value="*" selected>--- Choose Region ---</option>
                                                        @for( (k,v) <- CommonUtil.REGION.toArray.sorted){
                                                            <option value="@v">@k</option>
                                                        }
                                                    </select>
                                                </div>*@
                                                <div class="col-sm-6 col-xs-12" style="height: 70px;padding-top: 15px;">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Status</span>
                                                    <select class="form-control selectBoxMb slStatus" style="height: 20px">
                                                    @for( (k,v) <- CommonUtil.STATUS_MAP){
                                                        @if(v == 1){
                                                            <option value="@v" selected>@k</option>
                                                        }else{
                                                            <option value="@v">@k</option>
                                                        }
                                                    }
                                                    </select>
                                                </div>
                                                <div class="col-sm-6 col-xs-12" style="height: 70px;padding-top: 15px;">
                                                    <span class="titFilter"><i class="fa fa-bell"></i> Group Month</span>
                                                    <div class="input-group date monthPicker">
                                                        <input type="text" class="monthGrp form-control txtInputMb" value="@month" readonly="true" style="background-color: #16a085!important;color: #fff">
                                                        <span class="input-group-addon" style="background-color: #5A738E!important;width: 40px"><i class="fa fa-calendar" aria-hidden="true" style="color:white;margin-left: 25px"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="margin:15px 0px 0px 0px;padding:0px 15px">
                                                <a class="apply btn btn-xs btn-success" style="float: right;margin-bottom: 15px"><i class="fa fa-check-circle"></i> Apply</a>
                                                <a href="/internet/region" class="btn btn-xs btn-secondary btnRefresh"><i class="fa fa-refresh"></i> Refresh</a>
                                            </div>
                                            <div class="col-xs-12 lineDivXs"></div>
                                            @*<div style="margin-top: 60px">
                                                <label class="txtCmt">Data is pending 2018-10</label>
                                                <textarea class="form-control areaXs" placeholder="Your comment report..." id="cmt" rows="3" style="color: #13171b"></textarea>
                                                <a class="btn btn-xs btn-primary" style="margin: 10px 15px 20px 0px;float: right">Comment</a>
                                            </div>*@
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <!-- Mobile Menu end -->
            </div>
            @if(rs != null) {
                @helper.CSRF.formField
                <input type="hidden" value="@month" id="month">
                <input type="hidden" id="age">
                <input type="hidden" id="region">
                <input type="hidden" id="profile">

                <input type="hidden" id="minRateAgeProf" value="@rs.trendAgeProfile._2.map(x=>x._3).min">
                <input type="hidden" id="minPertAgeProf" value="@rs.trendAgeProfile._2.map(x=>x._4).min">
                <input type="hidden" id="minRatemonthProf" value="@rs.trendProfileMonth._3.map(x=>x._3).min">
                <input type="hidden" id="minPertmonthProf" value="@rs.trendProfileMonth._3.map(x=>x._4).min">
                <input type="hidden" id="minRatemonthRegion" value="@rs.trendRegionMonth._2.map(x=>x._3).min">
                <input type="hidden" id="minPertmonthRegion" value="@rs.trendRegionMonth._2.map(x=>x._4).min">

                <input type="hidden" id="indexChart">

                <div class="rate-percent-area mg-t-15">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                <div class="product-sales-chart">
                                    <div class="portlet-title" style="height: 35px">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="caption pro-sl-hd">
                                                    <span class="caption-subject">Churn Rate and Percentage by Region
                                                        <span class="dropdown">
                                                            <a name="0" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                            <div class="dropdown-menu ddMore" style="background: #211d1d;position: absolute;min-width: 390px!important;">
                                                                <p class="divMore">
                                                                    <span>Thống kê tỷ lệ và phần trăm rời mạng theo vùng</span><span class="dots">...</span><br>
                                                                    <span class="more" style="display: none">
                                                                        <b>Ví dụ:</b><br>
                                                                        <span>Đối với Vùng 1:</span><br>
                                                                        <span>- Tỷ lệ rời mạng = Số HĐ RỜI MẠNG ở Vùng 1 / Tổng số HĐ ở Vùng 1</span><br>
                                                                        <span>- Phần trăm rời mạng = Số HĐ RỜI MẠNG ở Vùng 1 / Tổng số HĐ RỜI MẠNG trong tháng</span><br>
                                                                        <span><b>*Lưu ý</b>: Mặc định, RỜI MẠNG = HỦY DỊCH VỤ</span>
                                                                    </span>
                                                                </p>
                                                                <a onclick="showMoreLess(this)"><i class="fa fa-angle-double-down tooltipSL" aria-hidden="true"></i></a>
                                                            </div>
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="churn1" style="width: auto; height: 320px;"></div>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                <div class="product-sales-chart">
                                    <div class="portlet-title" style="height: 35px">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                <div class="caption pro-sl-hd">
                                                    <span class="caption-subject">Trend in Churn Rate and Percentage by Region
                                                        <span class="dropdown">
                                                            <a name="1" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                            <div class="dropdown-menu ddMore" style="background: #211d1d">
                                                                <p class="divMore">
                                                                    <span>Thống kê tỷ lệ và phần trăm rời mạng theo vùng, đi kèm là số lượng HĐ rời mạng tương ứng, trong 12 tháng gần nhất</span>
                                                                </p>
                                                            </div>
                                                        </span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="chartWithOverlay">
                                        <div id="churn3_tooltip" class="custom_tooltip" style="display: none"></div>
                                        <div id="churn3" style="width: auto; height: 320px;"></div>
                                        <div class="overlay" id="churn3_overlay">
                                            <span>ChurnPert (%)</span>
                                            <div style="margin: 4px 0px 2px 7px"><div class="circle" style="margin-right: 10px"><span style="opacity: 0"></span></div><span id="churn3_txtMin" style="color:#0D3349 ">@format2Decimal(rs.trendRegionMonth._2.map(x=>x._4).min)</span></div>
                                            <div style="margin: 0px 0px 2px 6px"><div class="circle" style="margin-right: 8px"><span style="width: 15px;opacity: 0">11</span></div><span id="churn3_circle2" style="color:#0D3349 ">@format2Decimal((rs.trendRegionMonth._2.map(x=>x._4).max -rs.trendRegionMonth._2.map(x=>x._4).min)/5*2)</span></div>
                                            <div style="margin: 0px 0px 2px 5px"><div class="circle" style="margin-right: 6px"><span style="width: 17px;opacity: 0">111</span></div><span id="churn3_circle3" style="color:#0D3349 ">@format2Decimal((rs.trendRegionMonth._2.map(x=>x._4).max -rs.trendRegionMonth._2.map(x=>x._4).min)/5*3)</span></div>
                                            <div style="margin-left: 4px"><div class="circle" style="margin-right: 4px"><span style="width: 20px;opacity: 0">1111</span></div><span id="churn3_txtMax" style="color:#0D3349 ">@format2Decimal(rs.trendRegionMonth._2.map(x=>x._4).max)</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="rate-percent-area mg-t-15">
                    <div class="container-fluid">
                        <div class="tab-area panel with-nav-tabs panel-primary">
                    <div class="panel-heading">
                        <ul class="nav nav-tabs">
                            <li class="active"><a class="tabMonth" style="cursor: pointer">Package Month</a></li>
                            <li><a class="tabAge" style="cursor: pointer">Package Age</a></li>
                        </ul>
                    </div>
                    <div class="panel-body" style="padding-top: 0px">
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="tabMonth">
                                <div class="row">
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                        <div class="product-sales-chart">
                                            <div class="portlet-title" style="height: 35px">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="caption pro-sl-hd">
                                                            <span class="caption-subject">Churn Rate and Percentage by Package
                                                                <span class="dropdown" style="position: inherit">
                                                                    <a name="2" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                                    <div class="dropdown-menu ddMore" style="background: #211d1d;position: absolute;left:15px">
                                                                        <p class="divMore">
                                                                            <span>Thống kê tỷ lệ và phần trăm rời mạng, đi kèm là số lượng HĐ rời mạng tương ứng, theo gói dịch vụ. Chỉ hiển thị 8 gói dịch vụ có chỉ số rời mạng (tỷ lệ kết hợp phần trăm rời mạng) cao nhất trong tháng
                                                                            </span><span class="dots">...</span><br>
                                                                            <span class="more" style="display: none">
                                                                                <b>Ví dụ:</b><br>
                                                                                <span>Đối với gói FTTH - F2:</span><br>
                                                                                <span>- Tỷ lệ rời mạng = Số HĐ RỜI MẠNG gói FTTH - F2 / Tổng số HĐ sử dụng gói FTTH - F2</span><br>
                                                                                <span>- Phần trăm rời mạng = Số HĐ RỜI MẠNG gói FTTH - F2 / Tổng số HĐ RỜI MẠNG trong tháng</span><br>
                                                                                <span><b>*Lưu ý</b>: Mặc định, RỜI MẠNG = HỦY DỊCH VỤ</span>
                                                                            </span>
                                                                        </p>
                                                                        <a onclick="showMoreLess(this)"><i class="fa fa-angle-double-down tooltipSL" aria-hidden="true"></i></a>
                                                                    </div>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="churn2" style="width: auto; height: 380px;"></div>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                        <div class="product-sales-chart">
                                            <div class="portlet-title" style="height: 35px">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="caption pro-sl-hd">
                                                            <span class="caption-subject">Trend in Churn Rate and Percentage by Package
                                                                <span class="dropdown">
                                                                    <a name="3" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                                    <div class="dropdown-menu ddMore" style="background: #211d1d">
                                                                        <p class="divMore">
                                                                            <span>Thống kê tỷ lệ và phần trăm rời mạng, đi kèm là số lượng HĐ rời mạng tương ứng, theo gói dịch vụ (cho 8 gói dịch vụ được chọn ở biểu đồ bên trái) trong 12 tháng gần nhất</span>
                                                                        </p>
                                                                    </div>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chartWithOverlay">
                                                <div id="churn4_tooltip" class="custom_tooltip" style="display: none"></div>
                                                <div id="churn4" style="width: auto; height: 380px;"></div>
                                                <div class="overlay trendPrf">
                                                    <span>ChurnPert (%)</span>
                                                    <div style="margin: 4px 0px 2px 7px"><div class="circle" style="margin-right: 11px"><span style="opacity: 0"></span></div><span id="churn4_txtMin" style="color:#0D3349 ">@format2Decimal(rs.trendProfileMonth._3.map(x=>x._4).min)</span></div>
                                                    <div style="margin: 0px 0px 2px 6px"><div class="circle" style="margin-right: 8px"><span style="width: 15px;opacity: 0">11</span></div><span id="churn4_circle2" style="color:#0D3349 ">@format2Decimal((rs.trendProfileMonth._3.map(x=>x._4).max -rs.trendProfileMonth._3.map(x=>x._4).min)/5*2)</span></div>
                                                    <div style="margin: 0px 0px 2px 5px"><div class="circle" style="margin-right: 6px"><span style="width: 17px;opacity: 0">111</span></div><span id="churn4_circle3" style="color:#0D3349 ">@format2Decimal((rs.trendProfileMonth._3.map(x=>x._4).max -rs.trendProfileMonth._3.map(x=>x._4).min)/5*3)</span></div>
                                                    <div style="margin-left: 4px"><div class="circle" style="margin-right: 4px"><span style="width: 20px;opacity: 0">1111</span></div><span id="churn4_txtMax" style="color:#0D3349 ">@format2Decimal(rs.trendProfileMonth._3.map(x=>x._4).max)</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="tab-pane fade" id="tabAge">
                                <div class="row">
                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                        <div class="product-sales-chart">
                                            <div class="portlet-title" style="height: 35px">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="caption pro-sl-hd">
                                                            <span class="caption-subject">Number of Contracts by Contract Age for Packages That Have High Churns
                                                                <span class="dropdown" style="position: inherit">
                                                                    <a name="4" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                                    <div class="dropdown-menu ddMore" style="background: #211d1d;position: absolute;left:15px">
                                                                        <p class="divMore">
                                                                            <span>Thống kê số HĐ theo tuổi HĐ và gói dịch vụ. Chỉ hiển thị 8 gói dịch vụ có chỉ số rời mạng (tỷ lệ kết hợp phần trăm rời mạng) cao nhất trong tháng</span>
                                                                        </p>
                                                                    </div>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="churn-heatmap" style="width: auto; height: 350px;"></div>
                                        </div>
                                    </div>

                                    <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">
                                        <div class="product-sales-chart">
                                            <div class="portlet-title" style="height: 35px">
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="caption pro-sl-hd">
                                                            <span class="caption-subject">Churn Rate and Churn Percentage by Package by Contract Age
                                                                <span class="dropdown">
                                                                    <a name="5" class="dropdown-toggle aMore" style="cursor: pointer" onclick="toogleTooltip(this)"><i class="fa fa-info-circle" style="color: #16a085;"></i></a>
                                                                    <div class="dropdown-menu ddMore" style="background: #211d1d">
                                                                        <p class="divMore">
                                                                            <span>Thống kê tỷ lệ và phần trăm rời mạng, đi kèm là số lượng HĐ rời mạng tương ứng, theo gói dịch vụ (cho 8 gói dịch vụ được chọn ở biểu đồ bên trái)
                                                                            </span><span class="dots">...</span><br>
                                                                            <span class="more" style="display: none">
                                                                                <b>Ví dụ:</b><br>
                                                                                <span>Đối với các HĐ sử dụng gói FTTH - F2, từ 6-12 tháng tuổi:</span><br>
                                                                                <span>- Tỷ lệ rời mạng = Số HĐ RỜI MẠNG sử dụng gói FTTH - F2, từ 6-12 tháng tuổi / Tổng số HĐ sử dụng gói FTTH - F2, từ 6-12 tháng tuổi</span><br>
                                                                                <span>- Phần trăm rời mạng = Số HĐ RỜI MẠNG sử dụng gói FTTH - F2, từ 6-12 tháng tuổi / Tổng số HĐ RỜI MẠNG sử dụng gói FTTH - F2</span><br>
                                                                                <span><b>*Lưu ý</b>: Mặc định, RỜI MẠNG = HỦY DỊCH VỤ</span>
                                                                            </span>
                                                                        </p>
                                                                        <a onclick="showMoreLess(this)"><i class="fa fa-angle-double-down tooltipSL" aria-hidden="true"></i></a>
                                                                    </div>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="chartWithOverlay">
                                                <div id="churn5_tooltip" class="custom_tooltip" style="display: none"></div>
                                                <div id="churn5" style="width: auto; height: 380px;"></div>
                                                <div class="overlay">
                                                    <span>ChurnPert (%)</span>
                                                    <div style="margin: 4px 0px 2px 7px"><div class="circle" style="margin-right: 11px"><span style="opacity: 0"></span></div><span id="churn5_txtMin" style="color:#0D3349 ">@format2Decimal(rs.trendAgeProfile._2.map(x=>x._4).min)</span></div>
                                                    <div style="margin: 0px 0px 2px 6px"><div class="circle" style="margin-right: 8px"><span style="width: 15px;opacity: 0">11</span></div><span id="churn5_circle2" style="color:#0D3349 ">@format2Decimal((rs.trendAgeProfile._2.map(x=>x._4).max -rs.trendAgeProfile._2.map(x=>x._4).min)/5*2)</span></div>
                                                    <div style="margin: 0px 0px 2px 5px"><div class="circle" style="margin-right: 6px"><span style="width: 17px;opacity: 0">111</span></div><span id="churn5_circle3" style="color:#0D3349 ">@format2Decimal((rs.trendAgeProfile._2.map(x=>x._4).max -rs.trendAgeProfile._2.map(x=>x._4).min)/5*3)</span></div>
                                                    <div style="margin-left: 4px"><div class="circle" style="margin-right: 4px"><span style="width: 20px;opacity: 0">1111</span></div><span id="churn5_txtMax" style="color:#0D3349 ">@format2Decimal(rs.trendAgeProfile._2.map(x=>x._4).max)</span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    </div>
                </div>

            } else{
                <div class="row"><h2 class="noData-title">
                    Sorry, This page is under construction, please come back later...</h2></div>
            }
            <div class="footer-copyright-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="footer-copy-right">
                                <p>Copyright © 2018. All rights reserved.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="/assets/otherLayout/js/vendor/jquery-1.12.4.min.js"></script>
        <script src="/assets/otherLayout/js/bootstrap.min.js"></script>
        <script src="/assets/otherLayout/js/wow.min.js"></script>
        <script src="/assets/otherLayout/js/jquery-price-slider.js"></script>
        <script src="/assets/otherLayout/js/jquery.meanmenu.js"></script>
        <script src="/assets/otherLayout/js/owl.carousel.min.js"></script>
        <script src="/assets/otherLayout/js/jquery.sticky.js"></script>
        <script src="/assets/otherLayout/js/jquery.scrollUp.min.js"></script>
        <script src="/assets/otherLayout/js/counterup/jquery.counterup.min.js"></script>
        <script src="/assets/otherLayout/js/counterup/waypoints.min.js"></script>
        <script src="/assets/otherLayout/js/counterup/counterup-active.js"></script>
        <script src="/assets/otherLayout/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="/assets/otherLayout/js/scrollbar/mCustomScrollbar-active.js"></script>
        <script src="/assets/otherLayout/js/metisMenu/metisMenu.min.js"></script>
        <script src="/assets/otherLayout/js/metisMenu/metisMenu-active.js"></script>
        <script src="/assets/otherLayout/js/plugins.js"></script>
        <script src="/assets/otherLayout/js/main.js"></script>
        <script src="/assets/javascripts/waitMe.js"></script>
        <script src="/assets/javascripts/common_churn.js"></script>
        <!--  Datepicker -->
        <script src="/assets/datepicker/js/bootstrap-datepicker.js"></script>
        <script src="/assets/javascripts/jsapi.js"></script>
            <!-- High chart -->
        <script src="/assets/javascripts/highcharts.js"></script>
        <script src="/assets/javascripts/heatmap.js"></script>
        <script src="/assets/javascripts/exporting.js"></script>
        <script src="/assets/javascripts/highcharts-customEvent.js"></script>

        @if(rs != null) {
            @scripts(rs)
        }
    </body>

</html>