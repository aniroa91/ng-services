@(response: model.user.DashboardResponse)
@import play.api.libs.json.Json
@import services.domain.CommonService.getOthers

<script type="text/javascript">
        $(document).ready(function () {
            // auto count number
            $('.counter').counterUp({
                delay: 10,
                time: 1000
            });

            // Build the chart pie customer
            Highcharts.chart('pie-customer', {
                chart: {
                    type: 'pie'
                },
                title: {
                    text: ''
                },
                tooltip: {
                    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                },
                plotOptions: {
                    pie: {
                        colors: [
                            '#3498DB',
                            '#1ABB9C',
                            '#9B59B6',
                            '#9CC2CB',
                            '#E74C3C',
                            '#73879C'
                        ],
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: true
                        },
                        showInLegend: true
                    }
                },
                series: [{
                    name: 'Percent',
                    innerSize:'40%',
                    colorByPoint: true,
                    data: [ {
                        name: 'IPTV',
                        y: 40,
                        sliced: true,
                        selected: true
                    }, {
                        name: 'Service',
                        y: 11
                    },{
                        name: 'Child',
                        y: 32
                    }]
                }]
            });

            // draw chart column iptv
            Highcharts.chart('col-iptv', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: ['VTV1', 'THVL', 'VTV3', 'K+', 'ANND']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: ''
                    }
                },
                legend: {
                    align: 'right',
                    x: -30,
                    verticalAlign: 'top',
                    y: 25,
                    floating: true,
                    backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
                    borderColor: '#CCC',
                    borderWidth: 1,
                    shadow: false
                },
                tooltip: {
                    headerFormat: '<b>{point.x}</b><br/>',
                    pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
                },
                plotOptions: {
                    column: {
                        stacking: 'normal',
                        pointPadding: 0.2,
                        borderWidth: 0,
                    }
                },
                colors: [
                   '#73879C', '#1ABB9C'
                ],
                series: [{
                    name: 'Sum of value',
                    data: [5, 3, 4, 7, 2]
                }, {
                    name: 'Sum of count',
                    data: [2, 2, 3, 2, 1]
                }]
            });

            // draw chart column hourly, day of week
            var daily = @Html(Json.stringify(Json.toJson(response.dayOfWeek.map(x => x.key))));
            var values = @Html(Json.stringify(Json.toJson(response.dayOfWeek.map(x => x.value))));
            Highcharts.chart('col-day', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: daily,
                    crosshair: true
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Average'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Day of week: {point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                    }
                },
                colors: [
                    '#1ABB9C'
                ],
                series: [{
                    name: 'Duration day of week',
                    data: values

                }]
            });
            var hourly = @Html(Json.stringify(Json.toJson(response.hourly.map(x => x.key))));
                values = @Html(Json.stringify(Json.toJson(response.hourly.map(x => x.value))));
            Highcharts.chart('col-hourly', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: ''
                },
                xAxis: {
                    categories: hourly,
                    crosshair: true
                },
                colors: [
                    '#1ABB9C'
                ],
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Average'
                    }
                },
                tooltip: {
                    headerFormat: '<span style="font-size:10px">Day of week: {point.key}</span><table>',
                    pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                    '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
                    footerFormat: '</table>',
                    shared: true,
                    useHTML: true
                },
                plotOptions: {
                    column: {
                        pointPadding: 0,
                        borderWidth: 0
                    }
                },
                series: [{
                    name: 'Duration hourly',
                    data: values

                }]
            });

        });
</script>